<!DOCTYPE html>
<html>
<head>
    <title>incrustwerush.org - ChatGPT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body style="margin: 0 auto; background-color: white; font-family: monospace;">
    <div style="margin: 10px; border: 1px solid black;">
        <div style="margin: 20px; text-align: center;">
            <span style="font-weight: bold; font-size: 25px;">ChatGPT</span>
        </div>
        <div style="margin: 20px; border: 1px solid black;">
            <div style="margin: 20px;">
                Chat BOX
            </div>
            <div style="margin: 20px;">
                <textarea style="width: 100%; height: 350px;" id="chat" readonly></textarea>
            </div>
        </div>
        <div style="margin: 20px; border: 1px solid black;">
            <div style="margin: 20px;">
                Message :
            </div>
            <div style="margin: 20px;">
                <textarea style="width: 100%; height: 150px;" id="msg"></textarea>
            </div>
            <div style="margin: 20px;">
                <button onmouseover="this.style.color='black'; this.style.background='gray';" onmouseout="this.style.color='white'; this.style.background='black';" type="submit" style="padding: 20px; background-color: black; border: 1px solid black; width: 100%; color: white;" onclick="chat();">Send Message!</button>
            </div>
        </div>
    </div>
    <script>
        function chat()
        {

            var msg = document.getElementById("msg").value;

            if (msg != '') {

                document.getElementById("msg").value = "";

                document.getElementById("chat").value += "You : \n\n" + msg + "\n\n";

                var url = "https://langapi.cyclic.app/api/openai?text=" + msg;

                fetch(url)
                .then(function (result)
                {

                    return result.json();

                })
                .then(function (data)
                {

                    // console.log(data.result);
                    document.getElementById("chat").value += "GPT : \n\n" + data.result + "\n\n";

                })
                .catch(error => {

                    document.getElementById("chat").value += "GPT : \n\nMaaf, terjadi kesalahan \n\n";

                })
                .finally(() => {

                    var textarea = document.getElementById('chat');
                    textarea.scrollTop = textarea.scrollHeight;

                });

            } else {

                document.getElementById("chat").value += "GPT : \n\nHarap isi pesan! \n\n";

            }

            var textarea = document.getElementById('chat');
            textarea.scrollTop = textarea.scrollHeight;

        }
    </script>
</body>
</html>
